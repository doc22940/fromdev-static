<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Escape for JSON and Javascript online tool</title>
<LINK href="stylesheets/wrap.css" rel="stylesheet" type="text/css">  
<script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
<script src="javascripts/link-index.js" type="text/javascript"></script>
<script src="javascripts/register-links.js" type="text/javascript"></script>
</head>
<body>
<div class="container">
<ul class='index'></ul>
<div class="left">
<p>Normal:<br/>
<textarea id="normal"></textarea></p>
</div>
<div id="dirty" style="display:none;">
</div>
<div class="center">
<div id="log"></div>
<button  value="&darr; escape &darr;" id="btnEscape">Escape</button>
<button id="reset">Reset</button>
</div>
<div class="right">
<p>Escaped &amp; quoted:<br/>
<textarea id="jsonesc"></textarea></p>
</div >
</div>

</div>
</body></html>
<script>

document.body.className+=" jsEnabled";

document.getElementById('btnEscape').onclick=function(){
  var inp = document.getElementById('normal').value;
  var outp = json_quote(inp);
  document.getElementById('jsonesc').value=outp;
  document.getElementById('jsonesc').focus();
}

var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
    escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
    meta = { // table of character substitutions
        '\b': '\\b',
        '\t': '\\t',
        '\n': '\\n',
        '\f': '\\f',
        '\r': '\\r',
        '"' : '\\"',
        '\\': '\\\\'
    };

function json_quote(string) {
  escapable.lastIndex = 0;
  return escapable.test(string) ? '"' + string.replace(escapable, function (a) {
      var c = meta[a];
      return typeof c === 'string' ? c :
          '\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
  }) + '"' : '"' + string + '"';
}

var selectAll = function () {
        var $this = $(this);
        $this.select();

        // Work around Chrome's little problem
        $this.mouseup(function () {
            // Prevent further mouseup intervention
            $this.unbind("mouseup");
            return false;
        });
    };
     
$(window).load(function(){
	$("#normal").focus();
    $("#jsonesc").focus(selectAll);
    $("#normal").click(selectAll);
});
</script>