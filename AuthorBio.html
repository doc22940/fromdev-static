<html><head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type">
<title>Author Bio</title>
  
<script src="http://code.jquery.com/jquery-1.9.1.js" type="text/javascript"></script>
<script src="javascripts/fromdev-util.js?v=3" type="text/javascript"></script>
<script src="javascripts/link-index.js" type="text/javascript"></script>
<script src="javascripts/register-links.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="stylesheets/wrap.css">

<script type="text/javascript">//&lt;![CDATA[ 
$(window).load(function(){
    var isNoFollow = function(link) {
		return link.indexOf('twitter') !== -1;
	};
	var formatAuthorBio = function(e) {
		var spanTxt = "";
		e.children().each(function(){
			var  $this = $(this);
			if($this.is("span")) {
				spanTxt += $this.text();
			}
			if($this.is("a")){
				var url = $this.attr('href');
				var linkText = $this.text().trim();
				spanTxt += createNoFollowLink({'selectedText':linkText,'hashText':createHashText(linkText),'url':url, 'nofollow':isNoFollow(url)});
			}
		});
		return '<div class="related-index">' + spanTxt + '</div>';	
	};
	 $("#showtext").focus(function () {
        var $this = $(this);
        $this.select();

        // Work around Chrome's little problem
        $this.mouseup(function () {
            // Prevent further mouseup intervention
            $this.unbind("mouseup");
            return false;
        });
    });
	$("#clean").click(function(){
		var html = $.parseHTML($('#editable').html());
		$dirty = $("#dirty");
		$dirty.html(html);
		var spanTxt = formatAuthorBio($dirty);
		$("#showtext").val(spanTxt);
		
	});
});//]]&gt;  

</script>


</head>
<body>
<div class="container">
<ul class='index'></ul>
<div class="left" id="editable" contenteditable="true">
</div>
<div id="dirty" style="display:none;">
</div>
<div class="center">
<div id="log"></div>
<button id="clean">Clean HTML</button>
<button id="reset">Reset</button>
</div>
<div class="right">
<textarea id="showtext"></textarea>
</div >
</div>

</body></html>
